<!DOCTYPE html>
<html lang="en">
<title>Solving the Unit Commitment Problem with Mixed Integer Programming | Algebra and Geometry of Optimization</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="Ayush Bharadwaj">
<meta name="generator" content="Jekyll v4.2.2">
<link rel="canonical" href="http://localhost:4000/unit-commitment-problem/">

<link rel="stylesheet" href="/assets/css/frame.css">

<link rel="alternate" href="/feed.xml" type="application/atom+xml" title="Algebra and Geometry of Optimization">


<link rel="stylesheet" href="/assets/katex/katex.min.css">
<script defer src="/assets/katex/katex.min.js"></script>
<script defer src="/assets/katex/contrib/auto-render.min.js" onload="renderMathInElement(document.body)"></script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>




<link rel="stylesheet" href="/assets/css/sidebar.css" media="screen and (min-width: 70em)">
<aside style="display: none">
  <nav><a aria-label="Home" href="/" >
      <svg aria-hidden="true" class="icon"><use xlink:href="/assets/fontawesome/icons.svg#"></use></svg>
      <span aria-hidden="true">Home</span>
    </a><a aria-label="" href="/readme" >
      <svg aria-hidden="true" class="icon"><use xlink:href="/assets/fontawesome/icons.svg#"></use></svg>
      <span aria-hidden="true"></span>
    </a><a aria-label="About" href="/about" >
      <svg aria-hidden="true" class="icon"><use xlink:href="/assets/fontawesome/icons.svg#"></use></svg>
      <span aria-hidden="true">About</span>
    </a><a aria-label="Projects" href="/projects" >
      <svg aria-hidden="true" class="icon"><use xlink:href="/assets/fontawesome/icons.svg#"></use></svg>
      <span aria-hidden="true">Projects</span>
    </a><a aria-label="Mail" href="mailto:ayush.bharadwaj@gmail.com" >
      <svg aria-hidden="true" class="icon"><use xlink:href="/assets/fontawesome/icons.svg#envelope"></use></svg>
      <span aria-hidden="true">Mail</span>
    </a><a aria-label="Github" href="https://github.com/ayusbhar2" >
      <svg aria-hidden="true" class="icon"><use xlink:href="/assets/fontawesome/icons.svg#github"></use></svg>
      <span aria-hidden="true">Github</span>
    </a><a aria-label="Subscribe" href="/feed.xml" >
      <svg aria-hidden="true" class="icon"><use xlink:href="/assets/fontawesome/icons.svg#rss"></use></svg>
      <span aria-hidden="true">Subscribe</span>
    </a></nav>
  <div class="description">My musings on the theory as well as applications of convex and non-convex optimizatino to interesting problems.</div>
</aside>




<header>
  <a href="/" class="title">Algebra and Geometry of Optimization</a>
  <nav><a href="/" >Home</a><a href="/readme" ></a><a href="/about" >About</a><a href="/projects" >Projects</a></nav>

</header>

<article>
  <header>
  <h1><a href="/unit-commitment-problem/">Solving the Unit Commitment Problem with Mixed Integer Programming</a></h1><time datetime="2023-05-18T00:00:00-07:00">May 18, 2023</time>
</header>

  <p>The Unit Commitment Problem (UCP) [1] in power systems is the problem of scheduling the optimal number of power generating units (or simply units) to meet the total demand in each time period (or slot) of a planning horizon. The UCP is an optimization problem that aims to minmize the running costs, startup costs and shutdown costs of the units while satisfying constraints that guarantee appropriate operating conditions for the units.</p>

<p>The UCP can be formulated in a number of ways:</p>
<ul>
  <li>combinatorial approach</li>
  <li>priority list / heuristic approach</li>
  <li>dynamic programming</li>
  <li>Lagrangian relaxation</li>
  <li><strong>Mixed Integer Programming (MIP)</strong></li>
</ul>

<p>In this post we will consider the MIP approach since it is the state of the art for the UCP. Other approaches do not scale to any reasonable sized problem. We will consider a small but salient example [2] which has most features of a real life UCP.</p>

<h1 id="example">Example</h1>
<p>We are given three units -  A, B and C - with their corresponding costs and operational constraints. The hourly demand  profile over a three-period planning horizon is also given. We want to find the optimal schedule that minimizes the total cost, meets the hourly demand requirements and satisfies the operational constraints.</p>

<table>
  <thead>
    <tr>
      <th>Unit</th>
      <th>P_min (MW)</th>
      <th>P_max (MW)</th>
      <th>Min up (hr)</th>
      <th>Min down (hr)</th>
      <th>No-load cost ($)</th>
      <th>Marginal cost ($/MWh)</th>
      <th>Startup cost ($)</th>
      <th>Initial status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>A</td>
      <td>150</td>
      <td>250</td>
      <td>3</td>
      <td>3</td>
      <td>0</td>
      <td>10</td>
      <td>1000</td>
      <td>ON</td>
    </tr>
    <tr>
      <td>B</td>
      <td>50</td>
      <td>100</td>
      <td>2</td>
      <td>1</td>
      <td>0</td>
      <td>12</td>
      <td>600</td>
      <td>OFF</td>
    </tr>
    <tr>
      <td>C</td>
      <td>10</td>
      <td>50</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>20</td>
      <td>100</td>
      <td>OFF</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th>Period</th>
      <th>Demand (MW)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>150</td>
    </tr>
    <tr>
      <td>2</td>
      <td>300</td>
    </tr>
    <tr>
      <td>3</td>
      <td>200</td>
    </tr>
  </tbody>
</table>

<p>We must call out the features of a real-life UCP that our example does NOT capture.</p>
<ul>
  <li>Ignores unit rampup constraints</li>
  <li>Ignores reserve constraints and costs of reserves.</li>
  <li>Ignores environmental constraints.</li>
  <li>Ignores transmission network constraints.</li>
  <li>Assumes marginal costs remain constant over the planning horizon.</li>
  <li>Assumes constant startup costs. (Startup costs are often modeled by the approximationo of an exponential function of time)</li>
  <li>Assumes zero cool-down costs</li>
  <li>Assumes zero No-load costs</li>
</ul>

<p>In a real-life UCP some of the above features can cause non-trivial complications. However, our simplified example will serve us well for illustrative purposes.</p>

<h1 id="a-simple-economic-dispatch-model-with-lp">A simple economic dispatch model with LP</h1>

<p>Let us start by making some relaxations to our problem (in subsequent sections, we will strike out these relaxations one by one).</p>
<ol>
  <li>All units are running and available at all times (i.e. we don’t have the choice to turn a unit ON/OFF.)</li>
  <li>Startup costs are ignored.</li>
  <li>Minimum up- and down-time constraints do not apply.</li>
</ol>

<p>Now, we are interested in finding the optimal power output of each unit in each time period that minimizes the total marginal cost.</p>

<p>Parameters:</p>

<p>\(c_j\) := Marginal cost of running unit \(j\) ($/MWh)</p>

<p>\(D_t\) := Total demand in time slot \(t\) (MW)</p>

<p>\(P_{j, min}\) := Minimum recommended power output for unit \(j\) (MW)</p>

<p>\(P_{j, max}\) := Maximum recommended power output for unit \(j\) (MW)</p>

<p>\(J\) := Indexed set of all generators (a.k.a. units)</p>

<p>\(T\) := Indexed set of all time slots/periods (a.k.a. planning horizon)</p>

<p>Variables:</p>

<p>\(p_{j,t}\) := Power output of unit \(j\) in time slot \(t\) (MW)</p>

<p>Since we are only considering the marginal costs of runnint the units, the objective is pretty straightforward</p>

\[\text{minimize} \sum_{t\in T} \sum_{j \in J} c_j p_{j, t}\]

<p>There are two sets of constraints we need to consider. The power output of each generating unit must be within the recommended output range. And the total power output of all generating units must satisfy the demand in each time period. We can write these constraints as follows:</p>

\[P_{j, min} \le p_{j, t} \le P_{j, max}\ \text{(Output Range)}\\
\sum_{j \in J} p_{j, t} \ge D_t\ \text{(Demand)}\\\]

<p>We get the following model</p>

\[\text{minimize} \sum_{t\in T} \sum_{j \in J} c_j p_{j, t}\\
    \text{s.t.}\quad P_{j, min} \le p_{j, t} \le P_{j, max}\\ \tag{LP}
     \sum_{j \in J} p_{j, t} \ge D_t\]

<p>Let us solve (LP) using <code class="language-plaintext highlighter-rouge">cvxpy</code>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">cvxpy</span> <span class="k">as</span> <span class="n">cp</span>
<span class="kn">import</span> <span class="nn">cvxopt</span> <span class="k">as</span> <span class="n">cv</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>

<span class="kn">from</span> <span class="nn">solver.utils</span> <span class="kn">import</span> <span class="n">get_result_summary</span><span class="p">,</span> <span class="n">prettify</span>

<span class="c1"># parameters
</span><span class="n">cA</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="n">cB</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span> <span class="n">cC</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>

<span class="n">p_min_A</span> <span class="o">=</span> <span class="mi">150</span>
<span class="n">p_min_B</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">p_min_C</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">p_max_A</span> <span class="o">=</span> <span class="mi">250</span>
<span class="n">p_max_B</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">p_max_C</span> <span class="o">=</span> <span class="mi">50</span>

<span class="n">D1</span> <span class="o">=</span> <span class="mi">150</span><span class="p">;</span> <span class="n">D2</span> <span class="o">=</span> <span class="mi">300</span><span class="p">;</span> <span class="n">D3</span> <span class="o">=</span> <span class="mi">200</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#variables
</span><span class="n">pA1</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">nonneg</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'pA1'</span><span class="p">)</span>
<span class="n">pA2</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">nonneg</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'pA2'</span><span class="p">)</span>
<span class="n">pA3</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">nonneg</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'pA3'</span><span class="p">)</span>

<span class="n">pB1</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">nonneg</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'pB1'</span><span class="p">)</span>
<span class="n">pB2</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">nonneg</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'pB2'</span><span class="p">)</span>
<span class="n">pB3</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">nonneg</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'pB3'</span><span class="p">)</span>

<span class="n">pC1</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">nonneg</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'pC1'</span><span class="p">)</span>
<span class="n">pC2</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">nonneg</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'pC2'</span><span class="p">)</span>
<span class="n">pC3</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">nonneg</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'pC3'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">obj_LP</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Minimize</span><span class="p">(</span>
    <span class="n">cA</span> <span class="o">*</span> <span class="p">(</span><span class="n">pA1</span> <span class="o">+</span> <span class="n">pA2</span> <span class="o">+</span> <span class="n">pA3</span><span class="p">)</span> <span class="o">+</span>
    <span class="n">cB</span> <span class="o">*</span> <span class="p">(</span><span class="n">pB1</span> <span class="o">+</span> <span class="n">pB2</span> <span class="o">+</span> <span class="n">pB3</span><span class="p">)</span> <span class="o">+</span>
    <span class="n">cC</span> <span class="o">*</span> <span class="p">(</span><span class="n">pC1</span> <span class="o">+</span> <span class="n">pC2</span> <span class="o">+</span> <span class="n">pC3</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">LP_output_range_cons</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">pA1</span> <span class="o">&gt;=</span> <span class="n">p_min_A</span><span class="p">,</span>
    <span class="n">pA1</span> <span class="o">&lt;=</span> <span class="n">p_max_A</span><span class="p">,</span>
    <span class="n">pA2</span> <span class="o">&gt;=</span> <span class="n">p_min_A</span><span class="p">,</span>
    <span class="n">pA2</span> <span class="o">&lt;=</span> <span class="n">p_max_A</span><span class="p">,</span>
    <span class="n">pA3</span> <span class="o">&gt;=</span> <span class="n">p_min_A</span><span class="p">,</span>
    <span class="n">pA3</span> <span class="o">&lt;=</span> <span class="n">p_max_A</span><span class="p">,</span>
    
    <span class="n">pB1</span> <span class="o">&gt;=</span> <span class="n">p_min_B</span><span class="p">,</span>
    <span class="n">pB1</span> <span class="o">&lt;=</span> <span class="n">p_max_B</span><span class="p">,</span>
    <span class="n">pB2</span> <span class="o">&gt;=</span> <span class="n">p_min_B</span><span class="p">,</span>
    <span class="n">pB2</span> <span class="o">&lt;=</span> <span class="n">p_max_B</span><span class="p">,</span>
    <span class="n">pB3</span> <span class="o">&gt;=</span> <span class="n">p_min_B</span><span class="p">,</span>
    <span class="n">pB3</span> <span class="o">&lt;=</span> <span class="n">p_max_B</span><span class="p">,</span>
    
    <span class="n">pC1</span> <span class="o">&gt;=</span> <span class="n">p_min_C</span><span class="p">,</span>
    <span class="n">pC1</span> <span class="o">&lt;=</span> <span class="n">p_max_C</span><span class="p">,</span>
    <span class="n">pC2</span> <span class="o">&gt;=</span> <span class="n">p_min_C</span><span class="p">,</span>
    <span class="n">pC2</span> <span class="o">&lt;=</span> <span class="n">p_max_C</span><span class="p">,</span>
    <span class="n">pC3</span> <span class="o">&gt;=</span> <span class="n">p_min_C</span><span class="p">,</span>
    <span class="n">pC3</span> <span class="o">&lt;=</span> <span class="n">p_max_C</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">LP_demand_cons</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">pA1</span> <span class="o">+</span> <span class="n">pB1</span> <span class="o">+</span> <span class="n">pC1</span> <span class="o">&gt;=</span> <span class="n">D1</span><span class="p">,</span>
    <span class="n">pA2</span> <span class="o">+</span> <span class="n">pB2</span> <span class="o">+</span> <span class="n">pC2</span> <span class="o">&gt;=</span> <span class="n">D2</span><span class="p">,</span>
    <span class="n">pA3</span> <span class="o">+</span> <span class="n">pB3</span> <span class="o">+</span> <span class="n">pC3</span> <span class="o">&gt;=</span> <span class="n">D3</span><span class="p">,</span>
<span class="p">]</span>
 
<span class="n">cons_LP</span> <span class="o">=</span> <span class="n">LP_output_range_cons</span> <span class="o">+</span> <span class="n">LP_demand_cons</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">LP</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Problem</span><span class="p">(</span><span class="n">obj_LP</span><span class="p">,</span> <span class="n">cons_LP</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">LP</span><span class="p">.</span><span class="n">solve</span><span class="p">();</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">summary_LP</span> <span class="o">=</span> <span class="n">get_result_summary</span><span class="p">(</span><span class="n">LP</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">summary_LP</span><span class="p">[</span><span class="s">'status'</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'optimal'
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">summary_LP</span><span class="p">[</span><span class="s">'optimal_value'</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>7799.999998684703
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">prettify</span><span class="p">(</span><span class="n">summary_LP</span><span class="p">[</span><span class="s">'optimal_solution'</span><span class="p">])</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>variable</th>
      <th>value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>pA1</td>
      <td>150.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>pA2</td>
      <td>240.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>pA3</td>
      <td>150.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>pB1</td>
      <td>50.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>pB2</td>
      <td>50.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>pB3</td>
      <td>50.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>pC1</td>
      <td>10.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>pC2</td>
      <td>10.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>pC3</td>
      <td>10.0</td>
    </tr>
  </tbody>
</table>
</div>

<p>The minimum marginal cost of running the three units over the horizon is <mark> $7799.99 </mark>. Also note that unit A runs at minimum capacity during periods 1 and 3. During the peak period 2, the output of unit A is increased to meet the increased demand while units B and C continue to run at minimum capacity throughout the horizon. This makes sense because units B and C have a higher marginal cost than unit A. Next, we consider a model which allows us to choose which units are ON during each slot.</p>

<h1 id="a-first-mip-formulation">A first MIP formulation</h1>

<p>Here, we get rid of the first relaxation:</p>
<ol>
  <li><del>All units are running and available at all times. I.e. we don’t have the choice to turn a unit ON/OFF.</del></li>
  <li>Startup costs are ignored.</li>
  <li>Minimum up- and down-time constraints do not apply.</li>
</ol>

<p>We now have the choice to turn one or more units ON/OFF during any of the time slots. We will use a set of binary variables to model this choice.</p>

\[u_{j, t} :=
\begin{cases}
   1 \text{   if unit j is ON in slot t}\\
   0 \text{   otherwise }
\end{cases}\]

<p>Our objective as well as the demand constraint remain unchanged. However, the output range constraint needs to be modified in order to incorporate the new \(u_{j, t}\) variables.</p>

\[P_{j, min} u_{j, t} \le p_{j, t} \le P_{j, max} u_{j, t}\ \text{(Output Range)}\]

<p>Note that in the above formulation, if the unit \(j\) is OFF in period \(t\), the power output \(p_{j, t}\) is forced to be zero, so that we don’t have any power output contribution from an OFF unit. Below is the new MIP model</p>

\[\text{minimize} \sum_{t\in T} \sum_{j \in J} c_j p_{j, t}\\
\text{s.t.}\quad P_{j, min} u_{j, t} \le p_{j, t} \le P_{j, max} u_{j, t}\\ \tag{MIP-1}
\sum_{j \in J} p_{j, t} \ge D_t\\
u_{j, t} \in \{0, 1\} \ \forall\ j, t\]

<p>Let’s solve (MIP-1) with <code class="language-plaintext highlighter-rouge">cxvpy</code></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ON/OFF variables
</span><span class="n">uA1</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">boolean</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'uA1'</span><span class="p">)</span>
<span class="n">uA2</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">boolean</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'uA2'</span><span class="p">)</span>
<span class="n">uA3</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">boolean</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'uA3'</span><span class="p">)</span>

<span class="n">uB1</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">boolean</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'uB1'</span><span class="p">)</span>
<span class="n">uB2</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">boolean</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'uB2'</span><span class="p">)</span>
<span class="n">uB3</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">boolean</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'uB3'</span><span class="p">)</span>

<span class="n">uC1</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">boolean</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'uC1'</span><span class="p">)</span>
<span class="n">uC2</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">boolean</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'uC2'</span><span class="p">)</span>
<span class="n">uC3</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">boolean</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'uC3'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Objective remains unchanged
</span><span class="n">obj_MIP1</span> <span class="o">=</span> <span class="n">LP</span><span class="p">.</span><span class="n">objective</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># New constraints
</span><span class="n">MIP1_output_range_cons</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># output range
</span>    <span class="n">pA1</span> <span class="o">&gt;=</span> <span class="n">p_min_A</span> <span class="o">*</span> <span class="n">uA1</span><span class="p">,</span>
    <span class="n">pA1</span> <span class="o">&lt;=</span> <span class="n">p_max_A</span> <span class="o">*</span> <span class="n">uA1</span><span class="p">,</span>
    <span class="n">pA2</span> <span class="o">&gt;=</span> <span class="n">p_min_A</span> <span class="o">*</span> <span class="n">uA2</span><span class="p">,</span>
    <span class="n">pA2</span> <span class="o">&lt;=</span> <span class="n">p_max_A</span> <span class="o">*</span> <span class="n">uA2</span><span class="p">,</span>
    <span class="n">pA3</span> <span class="o">&gt;=</span> <span class="n">p_min_A</span> <span class="o">*</span> <span class="n">uA3</span><span class="p">,</span>
    <span class="n">pA3</span> <span class="o">&lt;=</span> <span class="n">p_max_A</span> <span class="o">*</span> <span class="n">uA3</span><span class="p">,</span>
    
    <span class="n">pB1</span> <span class="o">&gt;=</span> <span class="n">p_min_B</span> <span class="o">*</span> <span class="n">uB1</span><span class="p">,</span>
    <span class="n">pB1</span> <span class="o">&lt;=</span> <span class="n">p_max_B</span> <span class="o">*</span> <span class="n">uB1</span><span class="p">,</span>
    <span class="n">pB2</span> <span class="o">&gt;=</span> <span class="n">p_min_B</span> <span class="o">*</span> <span class="n">uB2</span><span class="p">,</span>
    <span class="n">pB2</span> <span class="o">&lt;=</span> <span class="n">p_max_B</span> <span class="o">*</span> <span class="n">uB2</span><span class="p">,</span>
    <span class="n">pB3</span> <span class="o">&gt;=</span> <span class="n">p_min_B</span> <span class="o">*</span> <span class="n">uB3</span><span class="p">,</span>
    <span class="n">pB3</span> <span class="o">&lt;=</span> <span class="n">p_max_B</span> <span class="o">*</span> <span class="n">uB3</span><span class="p">,</span>
    
    <span class="n">pC1</span> <span class="o">&gt;=</span> <span class="n">p_min_C</span> <span class="o">*</span> <span class="n">uC1</span><span class="p">,</span>
    <span class="n">pC1</span> <span class="o">&lt;=</span> <span class="n">p_max_C</span> <span class="o">*</span> <span class="n">uC1</span><span class="p">,</span>
    <span class="n">pC2</span> <span class="o">&gt;=</span> <span class="n">p_min_C</span> <span class="o">*</span> <span class="n">uC2</span><span class="p">,</span>
    <span class="n">pC2</span> <span class="o">&lt;=</span> <span class="n">p_max_C</span> <span class="o">*</span> <span class="n">uC2</span><span class="p">,</span>
    <span class="n">pC3</span> <span class="o">&gt;=</span> <span class="n">p_min_C</span> <span class="o">*</span> <span class="n">uC3</span><span class="p">,</span>
    <span class="n">pC3</span> <span class="o">&lt;=</span> <span class="n">p_max_C</span> <span class="o">*</span> <span class="n">uC3</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">cons_MIP1</span> <span class="o">=</span> <span class="n">MIP1_output_range_cons</span> <span class="o">+</span> <span class="n">LP_demand_cons</span> <span class="c1"># demand constraints don't change
</span></code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">MIP1</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Problem</span><span class="p">(</span><span class="n">obj_MIP1</span><span class="p">,</span> <span class="n">cons_MIP1</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">MIP1</span><span class="p">.</span><span class="n">solve</span><span class="p">();</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">summary_MIP1</span> <span class="o">=</span> <span class="n">get_result_summary</span><span class="p">(</span><span class="n">MIP1</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">summary_MIP1</span><span class="p">[</span><span class="s">'status'</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'optimal'
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">summary_MIP1</span><span class="p">[</span><span class="s">'optimal_value'</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>6600.0
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">prettify</span><span class="p">(</span><span class="n">summary_MIP1</span><span class="p">[</span><span class="s">'optimal_solution'</span><span class="p">])</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>variable</th>
      <th>value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>pA1</td>
      <td>150.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>pA2</td>
      <td>250.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>pA3</td>
      <td>200.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>pB1</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>pB2</td>
      <td>50.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>pB3</td>
      <td>-0.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>pC1</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>pC2</td>
      <td>-0.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>pC3</td>
      <td>-0.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>uA1</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>uA2</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>uA3</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>12</th>
      <td>uB1</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>13</th>
      <td>uB2</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>14</th>
      <td>uB3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>15</th>
      <td>uC1</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>16</th>
      <td>uC2</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>17</th>
      <td>uC3</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div>

<p>The optimal cost with the basic MIP model turns out to be <mark>$6600</mark>. Note that this is <mark>$1200 cheaper</mark> than the result of the (LP) model. Indeed, being able to choose which units to commit during each time slot has saved us some money!</p>

<p>Note that the model chose to fulfill all of the demand in period 1 with unit A, which is the cheapest to run. Both unit B and unit C are more expensive to run and were kept OFF during this period. For the peak demand period, unit B was turned ON to meet the additional demand and was turned back off at the end of the peak period. Unit C, which is the most expensive to run, was never turned ON.</p>

<h1 id="an-mip-model-with-startup-costs">An MIP model with startup costs</h1>

<p>Here, we get rid of the second relaxation:</p>
<ol>
  <li><del>All units are running and available at all times. I.e. we don’t have the choice to turn a unit ON/OFF.</del></li>
  <li><del>Startup costs are ignored.</del></li>
  <li>Minimum up- and down-time constraints do not apply.</li>
</ol>

<p>We now consider the startup costs of the units. A unit incurs a startup cost in a time period only if it was started up in that period. We need a binary variable to indicate if a unit was turnd ON in a given period. If so, the unit will incur the startup cost in that period in addition to the marginal cost.</p>

<p>We introduce a new parameter to denote the startup costs of the units</p>

\[c_j^u := \text{Startup cost of unit } j\ ($)\]

<p>and a new binary variable</p>

\[\alpha_{j, t} :=
\begin{cases}
   1 &amp;\text{   if unit \textit{j} was started in period \textit{t}}\\
   0 &amp;\text{   otherwise }
\end{cases}\]

<p>The new objective is given by:</p>

\[\text{minimize} \sum_{t\in T} \sum_{j \in J} c_j p_{j, t} + \alpha_{j, t} c_j^u\]

<p>The demand constraint as well as the output range constraints remain the same as for (MIP-1). However, we need a new constraint in order to ensure that \(\alpha_{j, t} = 1\) if and only if unit \(j\) was started up in period \(t\). This constraint can be modelled by the below function</p>

\[\alpha_{j, t} = \lfloor \frac{u_{j, t} - u_{j, t-1} + 1}{2} \rfloor\]

<p>The above non-linear function can be expressed in terms of linear constraints as follows:</p>

\[\alpha_{j, t} \le \frac{u_{j, t} - u_{j, t-1} + 1}{2}, \quad \alpha_{j, t} + 1 \ge \frac{u_{j, t} - u_{j, t-1} + 1}{2} + .25 \qquad \text{(Startup)}\]

<p>Our new model can be written as:</p>

\[\text{minimize} \sum_{t\in T} \sum_{j \in J} c_j p_{j, t} + \alpha_{j, t} c_j^u\\
     \text{s.t.}\quad P_{j, min} u_{j, t} \le p_{j, t} \le P_{j, max} u_{j, t}\\ 
     \sum_{j \in J} p_{j, t} \ge D_t\\ \tag{MIP-2}
     \alpha_{j, t} \le \frac{u_{j, t} - u_{j, t-1} + 1}{2}\\
     \alpha_{j, t} + 1 \ge \frac{u_{j, t} - u_{j, t-1} + 1}{2} + .25\\
     u_{j, t} \in \{0, 1\} \ \forall\ j, t\\
     \alpha_{j, t} \in \{0, 1\} \ \forall\ j, t\]

<p>Lets solve (MIP-2) with <code class="language-plaintext highlighter-rouge">cvxpy</code></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># parameters
## startup costs
</span><span class="n">cA_up</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">cB_up</span> <span class="o">=</span> <span class="mi">600</span>
<span class="n">cC_up</span> <span class="o">=</span> <span class="mi">100</span>

<span class="c1">## initial states
</span><span class="n">uA0</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># ON
</span><span class="n">uB0</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># OFF
</span><span class="n">uC0</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># OFF
</span></code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># startup variables
</span><span class="n">alpha_A1</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">boolean</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'alpha_A1'</span><span class="p">)</span>
<span class="n">alpha_A2</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">boolean</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'alpha_A2'</span><span class="p">)</span>
<span class="n">alpha_A3</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">boolean</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'alpha_A3'</span><span class="p">)</span>


<span class="n">alpha_B1</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">boolean</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'alpha_B1'</span><span class="p">)</span>
<span class="n">alpha_B2</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">boolean</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'alpha_B2'</span><span class="p">)</span>
<span class="n">alpha_B3</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">boolean</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'alpha_B3'</span><span class="p">)</span>


<span class="n">alpha_C1</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">boolean</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'alpha_C1'</span><span class="p">)</span>
<span class="n">alpha_C2</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">boolean</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'alpha_C2'</span><span class="p">)</span>
<span class="n">alpha_C3</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Variable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">boolean</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'alpha_C3'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># objective
</span><span class="n">obj_MIP2</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Minimize</span><span class="p">(</span>
    <span class="n">cA</span> <span class="o">*</span> <span class="p">(</span><span class="n">pA1</span> <span class="o">+</span> <span class="n">pA2</span> <span class="o">+</span> <span class="n">pA3</span><span class="p">)</span> <span class="o">+</span> <span class="n">cA_up</span> <span class="o">*</span> <span class="p">(</span><span class="n">alpha_A1</span> <span class="o">+</span> <span class="n">alpha_A2</span> <span class="o">+</span> <span class="n">alpha_A3</span><span class="p">)</span> <span class="o">+</span>
    <span class="n">cB</span> <span class="o">*</span> <span class="p">(</span><span class="n">pB1</span> <span class="o">+</span> <span class="n">pB2</span> <span class="o">+</span> <span class="n">pB3</span><span class="p">)</span> <span class="o">+</span> <span class="n">cB_up</span> <span class="o">*</span> <span class="p">(</span><span class="n">alpha_B1</span> <span class="o">+</span> <span class="n">alpha_B2</span> <span class="o">+</span> <span class="n">alpha_B3</span><span class="p">)</span> <span class="o">+</span>
    <span class="n">cC</span> <span class="o">*</span> <span class="p">(</span><span class="n">pC1</span> <span class="o">+</span> <span class="n">pC2</span> <span class="o">+</span> <span class="n">pC3</span><span class="p">)</span> <span class="o">+</span> <span class="n">cC_up</span> <span class="o">*</span> <span class="p">(</span><span class="n">alpha_C1</span> <span class="o">+</span> <span class="n">alpha_C2</span> <span class="o">+</span> <span class="n">alpha_C3</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># constraints
</span><span class="n">MIP2_startup_cons</span> <span class="o">=</span>  <span class="p">[</span>
    <span class="n">alpha_A1</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">uA1</span> <span class="o">-</span> <span class="n">uA0</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">alpha_A1</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="n">uA1</span> <span class="o">-</span> <span class="n">uA0</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="p">.</span><span class="mi">75</span><span class="p">,</span>
    <span class="n">alpha_A2</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">uA2</span> <span class="o">-</span> <span class="n">uA1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">alpha_A2</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="n">uA2</span> <span class="o">-</span> <span class="n">uA1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="p">.</span><span class="mi">75</span><span class="p">,</span>
    <span class="n">alpha_A3</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">uA3</span> <span class="o">-</span> <span class="n">uA2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">alpha_A3</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="n">uA3</span> <span class="o">-</span> <span class="n">uA2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="p">.</span><span class="mi">75</span><span class="p">,</span>
    
    <span class="n">alpha_B1</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">uB1</span> <span class="o">-</span> <span class="n">uB0</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">alpha_B1</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="n">uB1</span> <span class="o">-</span> <span class="n">uB0</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="p">.</span><span class="mi">75</span><span class="p">,</span>
    <span class="n">alpha_B2</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">uB2</span> <span class="o">-</span> <span class="n">uB1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">alpha_B2</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="n">uB2</span> <span class="o">-</span> <span class="n">uB1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="p">.</span><span class="mi">75</span><span class="p">,</span>
    <span class="n">alpha_B3</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">uB3</span> <span class="o">-</span> <span class="n">uB2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">alpha_B3</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="n">uB3</span> <span class="o">-</span> <span class="n">uB2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="p">.</span><span class="mi">75</span><span class="p">,</span>
    
    <span class="n">alpha_C1</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">uC1</span> <span class="o">-</span> <span class="n">uC0</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">alpha_C1</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="n">uC1</span> <span class="o">-</span> <span class="n">uC0</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="p">.</span><span class="mi">75</span><span class="p">,</span>
    <span class="n">alpha_C2</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">uC2</span> <span class="o">-</span> <span class="n">uC1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">alpha_C2</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="n">uC2</span> <span class="o">-</span> <span class="n">uC1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="p">.</span><span class="mi">75</span><span class="p">,</span>
    <span class="n">alpha_C3</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">uC3</span> <span class="o">-</span> <span class="n">uC2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">alpha_C3</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="n">uC3</span> <span class="o">-</span> <span class="n">uC2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="p">.</span><span class="mi">75</span><span class="p">,</span>
<span class="p">]</span>
    
<span class="n">cons_MIP2</span> <span class="o">=</span> <span class="n">MIP1</span><span class="p">.</span><span class="n">constraints</span> <span class="o">+</span> <span class="n">MIP2_startup_cons</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">MIP2</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="n">Problem</span><span class="p">(</span><span class="n">obj_MIP2</span><span class="p">,</span> <span class="n">cons_MIP2</span><span class="p">)</span>
<span class="n">MIP2</span><span class="p">.</span><span class="n">solve</span><span class="p">();</span>
<span class="n">summary_MIP2</span> <span class="o">=</span> <span class="n">get_result_summary</span><span class="p">(</span><span class="n">MIP2</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">summary_MIP2</span><span class="p">[</span><span class="s">'status'</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'optimal'
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">summary_MIP2</span><span class="p">[</span><span class="s">'optimal_value'</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>7100.0
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">prettify</span><span class="p">(</span><span class="n">summary_MIP2</span><span class="p">[</span><span class="s">'optimal_solution'</span><span class="p">])</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>variable</th>
      <th>value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>alpha_A1</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>alpha_A2</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>alpha_A3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>alpha_B1</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>alpha_B2</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>alpha_B3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>alpha_C1</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>alpha_C2</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>alpha_C3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>pA1</td>
      <td>150.0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>pA2</td>
      <td>250.0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>pA3</td>
      <td>200.0</td>
    </tr>
    <tr>
      <th>12</th>
      <td>pB1</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>13</th>
      <td>pB2</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>14</th>
      <td>pB3</td>
      <td>-0.0</td>
    </tr>
    <tr>
      <th>15</th>
      <td>pC1</td>
      <td>-0.0</td>
    </tr>
    <tr>
      <th>16</th>
      <td>pC2</td>
      <td>50.0</td>
    </tr>
    <tr>
      <th>17</th>
      <td>pC3</td>
      <td>-0.0</td>
    </tr>
    <tr>
      <th>18</th>
      <td>uA1</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>19</th>
      <td>uA2</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>20</th>
      <td>uA3</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>21</th>
      <td>uB1</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>22</th>
      <td>uB2</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>23</th>
      <td>uB3</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>24</th>
      <td>uC1</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>25</th>
      <td>uC2</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>26</th>
      <td>uC3</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div>

<p>The optimal value of the total cost (setup + marginal) is <mark> $7100</mark>. This optimal value is greater than the optimal value of MIP1 ($6600) because it includes the setup cost which we ignored in MIP1.</p>

<p>Also note that, once again, the model chose to meet all of the demand in period 1 with unit A. The reason for this is two-fold. First, unit A is the cheapest to run and incurrs the smallest marginal cost. So, it makes sense to preferentially run unit A whenever possible. Second, unit A was already in ON state at the beginning of the planning horizon and did not need to be turned ON. As a result, by keeping unit A running, we avoided the setup cost for unit A.</p>

<p>We should also note that during the peak demand period, the model chose to turn on unit C instead of unit B as it had done in MIP1. This is because while unit B is cheaper to run than unit C, it is more expensive to start up than unit C. Since the setup cost dominates the marginal cost, the model preferred to start up unit C.</p>

<h1 id="references">References</h1>

<p>[1] https://ntnuopen.ntnu.no/ntnu-xmlui/bitstream/handle/11250/298917/UnitCommitment.pdf?sequence=3</p>

<p>[2] https://www.youtube.com/watch?v=jS15dU_422Q</p>

  
</article>



<footer>
  <div>My musings on the theory as well as applications of convex and non-convex optimizatino to interesting problems.</div>
  <nav><a href="mailto:ayush.bharadwaj@gmail.com" ><svg aria-label="Mail" class="icon"><use xlink:href="/assets/fontawesome/icons.svg#envelope"></use></svg></a><a href="https://github.com/ayusbhar2" ><svg aria-label="Github" class="icon"><use xlink:href="/assets/fontawesome/icons.svg#github"></use></svg></a><a href="/feed.xml" ><svg aria-label="Subscribe" class="icon"><use xlink:href="/assets/fontawesome/icons.svg#rss"></use></svg></a></nav>

</footer>


</html>
